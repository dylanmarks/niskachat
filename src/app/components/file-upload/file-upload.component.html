<div class="file-upload-container" *ngIf="!context?.patient">
  <div class="upload-header">
    <h2>📁 Upload FHIR Bundle</h2>
    <p class="upload-subtitle">
      Upload a FHIR Bundle JSON file to view patient data offline
    </p>
  </div>

  <!-- Upload Area removed per new design -->

  <!-- Error State -->
  <div *ngIf="uploadStatus.error" class="error-card">
    <div class="error-icon">⚠️</div>
    <h3>Upload Error</h3>
    <p>{{ uploadStatus.error }}</p>
    <button
      class="retry-button"
      (click)="resetUpload(); $event.stopPropagation()"
    >
      Try Again
    </button>
  </div>

  <!-- Success State hidden per new design -->
  <div *ngIf="false" class="success-card">
    <div class="extracted-resources">
      <h4>Extracted Resources:</h4>
      <div class="resource-counts">
        <div
          class="resource-count"
          *ngIf="uploadStatus.extractedResources.patients.length > 0"
        >
          <span class="count">
            {{ uploadStatus.extractedResources.patients.length }}
          </span>
          <span class="label">Patient(s)</span>
        </div>
        <div
          class="resource-count"
          *ngIf="uploadStatus.extractedResources.conditions.length > 0"
        >
          <span class="count">
            {{ uploadStatus.extractedResources.conditions.length }}
          </span>
          <span class="label">Condition(s)</span>
        </div>
        <div
          class="resource-count"
          *ngIf="uploadStatus.extractedResources.observations.length > 0"
        >
          <span class="count">
            {{ uploadStatus.extractedResources.observations.length }}
          </span>
          <span class="label">Observation(s)</span>
        </div>
        <div
          class="resource-count"
          *ngIf="uploadStatus.extractedResources.medicationRequests.length > 0"
        >
          <span class="count">
            {{ uploadStatus.extractedResources.medicationRequests.length }}
          </span>
          <span class="label">Medication(s)</span>
        </div>
      </div>
    </div>

    <button
      class="new-upload-button"
      (click)="resetUpload(); $event.stopPropagation()"
    >
      Upload Another Bundle
    </button>
  </div>

  <!-- Current Context Info -->
  <div *ngIf="context && !context.patient" class="context-info">
    <div class="info-icon">ℹ️</div>
    <p>
      <strong>Offline Mode:</strong>
      Upload a FHIR Bundle to view patient data without connecting to a FHIR
      server.
    </p>

    <!-- Example Data Buttons -->
    <div class="example-data-section">
      <h4>Or try example data:</h4>
      <div class="example-buttons">
        <!-- Simple Upload Bundle button -->
        <input
          #fileInput
          type="file"
          accept=".json"
          (change)="onFileSelected($event)"
          style="display: none"
        />
        <button
          class="example-button"
          (click)="fileInput.click()"
          [disabled]="uploadStatus.isUploading"
        >
          📁 Upload Bundle
        </button>
        <button
          class="example-button"
          (click)="loadExampleData('johnsmith')"
          [disabled]="uploadStatus.isUploading"
        >
          📊 Load John Smith Data
        </button>
        <button
          class="example-button"
          (click)="loadExampleData('maria')"
          [disabled]="uploadStatus.isUploading"
        >
          📊 Load Maria Johnson Data
        </button>
      </div>
    </div>

    <!-- Authentication Button -->
    <div class="auth-section">
      <button class="auth-button" (click)="navigateToAuth()">
        Start Authentication
      </button>
    </div>
  </div>
</div>
